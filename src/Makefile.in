# @configure_input@

# Package-related substitution variables
package        	= @PACKAGE_NAME@
version        	= @PACKAGE_VERSION@
tarname        	= @PACKAGE_TARNAME@
distdir        	= $(tarname)-$(version)
LIBS		   	= @LIBS@
LDFLAGS 		= @LDFLAGS@
CFLAGS	   		= @CFLAGS@


# Prefix-related substitution variables
prefix         	= @prefix@
exec_prefix    	= @exec_prefix@
bindir         	= @bindir@ 
srcdir			= @srcdir@
VPATH			= @srcdir@
DEFS			= @DEFS@

# Tool-related substitution variables
CC             	= @CC@
CFLAGS         	= @CFLAGS@
CPPFLAGS       	= @CPPFLAGS@
INSTALL        	= @INSTALL@
INSTALL_DATA   	= @INSTALL_DATA@
INSTALL_PROGRAM	= @INSTALL_PROGRAM@
INSTALL_SCRIPT 	= @INSTALL_SCRIPT@


SRCFILES := $(shell find $(srcdir) -type f -name "*.c")
# export SRCFILES := $(subst $(SRCDIR)/,,$(SOURCES)) 
TOBJFILES  = $(subst $(srcdir)/,,$(SRCFILES)) 
OBJFILES  := $(patsubst %.c,%.o,$(TOBJFILES)) 

all: index


index: $(OBJFILES)
	$(CC) $(CFLAGS) $(DEFS)  $(CPPFLAGS) -g -I. -I$(srcdir) -I.. -o $@ $+ $(LDFLAGS) $(LIBS)
	
install:
	$(INSTALL) -d $(DESTDIR)$(bindir)/index
	$(INSTALL_PROGRAM) -m 0755 index $(DESTDIR)$(bindir)/index

uninstall:
	-rm -f $(DESTDIR)/bin

clean:
	-rm index

Makefile: Makefile.in ../config.status
	cd .. && ./config.status $@

../config.status: $(srcdir)/../configure
	cd .. && ./config.status --recheck

libcheck:
	echo $(LIBS)
	
hdrcheck:
	echo $(CFLAGS)
	
objcheck:
	echo $(OBJFILES)
	
.PHONY: all clean check install uninstall
